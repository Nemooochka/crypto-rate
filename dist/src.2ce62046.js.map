{"version":3,"sources":["components/SelectFiat.js","components/Filters.js","components/CoinsTable.js","components/App.js","data/dataStore.js","data/coinsAPI.js","data/coinsData.js","index.js"],"names":["updateFiatCurrency","event","selectedFiat","options","selectedIndex","value","window","dataStorage","renderApp","selectFiat","view","styles","coinToFiatSelect","activeFiat","availableFiats","map","fiat","Filters","filteredArr","activeFilterName","coinsDataDisplay","coinsDataUpd","activeElement","activeElementFilter","getAttribute","filterName","elem","classList","contains","document","querySelectorAll","forEach","remove","add","data","sort","a","b","localeCompare","classes","push","reverse","activeFilter","attr","CoinsTable","renderCoinsTable","generateCoinsTableHeader","thead","tr","title","filter","th","sortingIcon","generateCoinsTable","coinData","coinsTableBlock","PRICE","CHANGEPCTDAY","VOLUMEDAYTO","MKTCAP","coinName","changePctDay_HTML","green","red","td","isDataLoading","loading","coins","coinsTable","tbody","actualData","coin","App","dataStore","availableCoins","error","getCoinsUrl","rearengeData","coinsDataRaw","loadData","url","fetch","then","response","json","catch","Promise","resolve","getAvailablePairs","findFirst","startApp","module","hot","accept","getElementById","innerHTML"],"mappings":"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","file":"src.2ce62046.js","sourceRoot":"../src","sourcesContent":["import styles from '../styles.css';\n\nconst updateFiatCurrency = event => {\n  let selectedFiat = event.options[event.selectedIndex].value;\n  window.dataStorage['activeFiat'] = selectedFiat;\n  window.renderApp();\n};\n\nexport default function selectFiat() {\n  let view = `<select class=\"${styles.coinToFiatSelect}\" onchange=\"(${updateFiatCurrency})(this)\">`;\n  const { activeFiat, availableFiats } = window.dataStorage;\n\n  availableFiats.map(fiat => {\n    if (fiat === activeFiat) {\n      view += `<option value='${fiat}' selected>${fiat}</option>`;\n    } else {\n      view += `<option value='${fiat}'>${fiat}</option>`;\n    }\n  });\n\n  view += '</select>';\n  return view;\n}\n","export default function Filters(event) {\n  const filters = [\n    {\n      filterName: 'asset',\n      value: 'coinName',\n    },\n    {\n      filterName: 'price',\n      value: 'coinPrice',\n    },\n    {\n      filterName: 'returns',\n      value: 'coinChange',\n    },\n    {\n      filterName: 'cap',\n      value: 'coinCap',\n    },\n    {\n      filterName: 'volume',\n      value: 'coinVolume',\n    },\n  ];\n\n  let filteredArr = [];\n  let activeFilterName;\n  const { coinsDataDisplay, coinsDataUpd, activeFiat } = window.dataStorage;\n\n  const activeElement = event;\n  const activeElementFilter = activeElement.getAttribute('data-filter');\n  filters.map(elem => {\n    if (elem['filterName'] === activeElementFilter) activeFilterName = elem['value'];\n  });\n\n  if (!activeElement.classList.contains('active')) {\n    document\n      .querySelectorAll('div[data-filter]')\n      .forEach(elem => elem.classList.remove('active', 'up', 'down'));\n    activeElement.classList.add('active');\n  }\n\n  const formatNumberValue = number => {\n    let numberValue = number.replace(/^\\D+/g, '');\n    numberValue = numberValue.replace(/,/g, '');\n\n    return numberValue;\n  };\n\n  for (let data in coinsDataUpd) {\n    if (activeFilterName === 'coinName') {\n      filteredArr = coinsDataUpd.sort((a, b) =>\n        a[activeFiat][activeFilterName].localeCompare(b[activeFiat][activeFilterName]),\n      );\n    } else {\n      filteredArr = coinsDataUpd.sort(\n        (a, b) => a[activeFiat][activeFilterName] - b[activeFiat][activeFilterName],\n      );\n    }\n  }\n\n  let classes = [];\n  if (activeElement.classList.contains('up')) {\n    activeElement.classList.remove('up');\n    activeElement.classList.add('down');\n    classes = [];\n    classes.push('active', 'down');\n    filteredArr.reverse();\n  } else {\n    activeElement.classList.remove('down');\n    activeElement.classList.add('up');\n    classes = [];\n    classes.push('active', 'up');\n  }\n\n  window.dataStorage.activeFilter = {\n    attr: activeElement.getAttribute('data-filter'),\n    classes: classes,\n  };\n\n  window.dataStorage.filteredArr = filteredArr;\n\n  window.renderApp();\n}\n","import styles from '../styles.css';\n\nimport SelectFiat from './SelectFiat';\nimport Filters from './Filters';\n\nexport default function CoinsTable() {\n  const renderCoinsTable = () => {\n    if (window.dataStorage.isDataLoading) {\n      return `<div class=\"${styles.loading}\">Data is loading</div>`;\n    }\n    let view = `<div class=\"${styles.coins}\"> ${SelectFiat()} <div class=\"${\n      styles.coinsTable\n    }\"> ${generateCoinsTableHeader()} <div class=\"${styles.tbody}\">\n      </div>`;\n    const {\n      coinsDataDisplay,\n      coinsDataUpd,\n      availableFiats,\n      filteredArr,\n      activeFiat,\n    } = window.dataStorage;\n\n    let actualData = coinsDataUpd;\n    if (filteredArr) actualData = filteredArr;\n\n    for (let coin in actualData) {\n      view += `<div class=\"${styles.tr}\" id=\"${actualData[coin][activeFiat]['coinName']}\">\n                    ${generateCoinsTable(actualData[coin])}\n                  </div>`;\n    }\n\n    view += '</div></div>';\n    return view;\n  };\n\n  const generateCoinsTableHeader = () => {\n    const headers = [\n      {\n        title: 'Asset',\n        filter: 'asset',\n      },\n      {\n        title: 'Price',\n        filter: 'price',\n      },\n      {\n        title: 'Returns (24h)',\n        filter: 'returns',\n      },\n      {\n        title: 'Market Cap',\n        filter: 'cap',\n      },\n      {\n        title: 'Total Exchange Volume',\n        filter: 'volume',\n      },\n    ];\n\n    let view = `<div class=\"${styles.thead} thead\">\n                    <div class=\"${styles.tr}\">`;\n\n    headers.map(elem => {\n      view += `<div class=\"\n                ${styles.th}\n                ${\n                  elem.filter === window.dataStorage.activeFilter['attr']\n                    ? window.dataStorage.activeFilter['classes'][0]\n                    : ''\n                }\n                ${\n                  elem.filter === window.dataStorage.activeFilter['attr']\n                    ? window.dataStorage.activeFilter['classes'][1]\n                    : ''\n                }\" onclick=\"(${Filters})(this)\" data-filter=\"${elem.filter}\">\n                <i class=\"${styles.sortingIcon}\"></i>\n                <span>${elem.title}</span>\n            </div>`;\n    });\n\n    view += `</div></div>`;\n    return view;\n  };\n\n  const generateCoinsTable = coinData => {\n    let coinsTableBlock = '';\n    const { activeFiat } = window.dataStorage;\n    const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP, coinName } = coinData[activeFiat];\n\n    let changePctDay_HTML;\n    if (CHANGEPCTDAY >= 0) {\n      changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n    } else {\n      changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n    }\n\n    coinsTableBlock += `\n                          <div class=\"${styles.td}\">\n                              <b>${coinName}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${PRICE}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${changePctDay_HTML}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${MKTCAP}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${VOLUMEDAYTO}</b>\n                          </div>\n                          `;\n\n    return coinsTableBlock;\n  };\n\n  return renderCoinsTable();\n}\n","import CoinsTable from './CoinsTable';\n\nexport default function App() {\n  return `<div>\n        ${CoinsTable()}\n    </div>`;\n}\n","const dataStore = {\n  availableFiats: [],\n  availableCoins: [],\n  activeFiat: 'USD',\n  isDataLoading: false,\n  error: null,\n  activeFilter: {\n    attr: '',\n    classes: [],\n  },\n};\n\nexport default dataStore;\n","export default function getCoinsUrl() {\n  return `https://min-api.cryptocompare.com/data/pricemultifull?fsyms=BTC,ETH,XRP,ADA&tsyms=USD,EUR&api_key={${process.env.CRYPTO_API_KEY}}`;\n}\n","import getCoinsUrl from './coinsAPI';\n\nconst rearengeData = coinsDataDisplay => {\n  let coinsDataUpd = [];\n  for (let coin in coinsDataDisplay) {\n    for (let fiat in coinsDataDisplay[coin]) {\n      coinsDataDisplay[coin][fiat]['coinName'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['FROMSYMBOL'];\n      coinsDataDisplay[coin][fiat]['coinPrice'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['PRICE'];\n      coinsDataDisplay[coin][fiat]['coinChange'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['CHANGEPCTDAY'];\n      coinsDataDisplay[coin][fiat]['coinCap'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['MKTCAP'];\n      coinsDataDisplay[coin][fiat]['coinVolume'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['VOLUMEDAYTO'];\n    }\n    coinsDataUpd.push(coinsDataDisplay[coin]);\n  }\n\n  window.dataStorage.coinsDataUpd = coinsDataUpd;\n};\n\nconst loadData = url => {\n  window.dataStorage.isDataLoading = true;\n  window.renderApp();\n  window.dataStorage.error = null;\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      window.dataStorage.isDataLoading = false;\n      window.dataStorage.coinsDataDisplay = data['DISPLAY'];\n      window.dataStorage.coinsDataRaw = data['RAW'];\n      rearengeData(window.dataStorage.coinsDataDisplay);\n    })\n    .catch(error => {\n      window.dataStore.error = error;\n      return Promise.resolve({});\n    });\n};\n\nconst getAvailablePairs = () => {\n  const { coinsDataDisplay, availableFiats, availableCoins } = window.dataStorage;\n  let findFirst = 0;\n  for (let coin in coinsDataDisplay) {\n    availableCoins.push(coin);\n    for (let fiat in coinsDataDisplay[coin]) {\n      if (!findFirst) {\n        availableFiats.push(fiat);\n      }\n    }\n    findFirst = 1;\n  }\n};\n\nexport default function startApp() {\n  const a = getCoinsUrl();\n  loadData(a).then(() => {\n    getAvailablePairs();\n    window.renderApp();\n  });\n}\n","// Start from here\n\nimport App from './components/App';\nimport dataStore from './data/dataStore';\nimport startApp from './data/coinsData';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStorage = dataStore;\n\nwindow.renderApp = () => {\n  document.getElementById('app-root').innerHTML = `\n          ${App()}\n      `;\n};\n\nstartApp();\n"]}