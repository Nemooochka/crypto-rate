{"version":3,"sources":["index.js"],"names":["module","hot","accept","window","dataStorage","availableFiats","availableCoins","activeFiat","newData","activeFilter","attr","classes","loadData","url","fetch","then","response","json","data","coinsDataDisplay","coinsDataRaw","rearengeData","getAvailablePairs","findFirst","coin","push","fiat","coinsDataUpd","startApp","renderApp","updateFiatCurrency","event","selectedFiat","options","selectedIndex","value","document","getElementById","innerHTML","App","filter","filteredArr","activeFilterName","activeElement","activeElementFilter","getAttribute","filterName","map","elem","classList","contains","querySelectorAll","forEach","remove","add","sort","a","b","localeCompare","reverse","renderCoinsTable","view","styles","coinsTable","generateCoinsTableHeader","tbody","actualData","tr","generateCoinsTable","thead","title","th","sortingIcon","coinData","coinsTableBlock","PRICE","CHANGEPCTDAY","VOLUMEDAYTO","MKTCAP","coinName","changePctDay_HTML","green","red","td","selectFiat","coinToFiatSelect","coins"],"mappings":"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","file":"crypto-rate.214b255c.js","sourceRoot":"..","sourcesContent":["// Start from here\n\nimport styles from './styles.css';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStorage = {\n  availableFiats: [],\n  availableCoins: [],\n  activeFiat: 'USD',\n  newData: [],\n  activeFilter: {\n    attr: '',\n    classes: [],\n  },\n};\n\nwindow.loadData = url => {\n  let a = url + `&api_key={${process.env.CRYPTO_API_KEY}}`;\n  return fetch(url + `&api_key={${process.env.CRYPTO_API_KEY}}`)\n    .then(response => response.json())\n    .then(data => {\n      window.dataStorage.coinsDataDisplay = data['DISPLAY'];\n      window.dataStorage.coinsDataRaw = data['RAW'];\n      window.rearengeData(window.dataStorage.coinsDataDisplay);\n    });\n};\n\nwindow.getAvailablePairs = () => {\n  const { coinsDataDisplay, availableFiats, availableCoins } = window.dataStorage;\n  let findFirst = 0;\n  for (let coin in coinsDataDisplay) {\n    availableCoins.push(coin);\n    for (let fiat in coinsDataDisplay[coin]) {\n      if (!findFirst) {\n        availableFiats.push(fiat);\n      }\n    }\n    findFirst = 1;\n  }\n};\n\nwindow.rearengeData = coinsDataDisplay => {\n  let coinsDataUpd = [];\n  for (let coin in coinsDataDisplay) {\n    for (let fiat in coinsDataDisplay[coin]) {\n      coinsDataDisplay[coin][fiat]['coinName'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['FROMSYMBOL'];\n      coinsDataDisplay[coin][fiat]['coinPrice'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['PRICE'];\n      coinsDataDisplay[coin][fiat]['coinChange'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['CHANGEPCTDAY'];\n      coinsDataDisplay[coin][fiat]['coinCap'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['MKTCAP'];\n      coinsDataDisplay[coin][fiat]['coinVolume'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['VOLUMEDAYTO'];\n    }\n    coinsDataUpd.push(coinsDataDisplay[coin]);\n  }\n\n  window.dataStorage.coinsDataUpd = coinsDataUpd;\n};\n\nconst startApp = () => {\n  window\n    .loadData(\n      'https://min-api.cryptocompare.com/data/pricemultifull?fsyms=BTC,ETH,XRP,ADA&tsyms=USD,EUR',\n    )\n    .then(() => {\n      window.getAvailablePairs();\n      window.renderApp();\n    });\n\n  window.updateFiatCurrency = event => {\n    let selectedFiat = event.options[event.selectedIndex].value;\n    window.dataStorage['activeFiat'] = selectedFiat;\n    window.renderApp();\n  };\n\n  window.renderApp = () => {\n    document.getElementById('app-root').innerHTML = `\n            ${App()}\n        `;\n  };\n};\n\nwindow.filter = event => {\n  const filters = [\n    {\n      filterName: 'asset',\n      value: 'coinName',\n    },\n    {\n      filterName: 'price',\n      value: 'coinPrice',\n    },\n    {\n      filterName: 'returns',\n      value: 'coinChange',\n    },\n    {\n      filterName: 'cap',\n      value: 'coinCap',\n    },\n    {\n      filterName: 'volume',\n      value: 'coinVolume',\n    },\n  ];\n\n  let filteredArr = [];\n  let activeFilterName;\n  const { coinsDataDisplay, coinsDataUpd, activeFiat } = window.dataStorage;\n\n  const activeElement = event;\n  const activeElementFilter = activeElement.getAttribute('data-filter');\n  filters.map(elem => {\n    if (elem['filterName'] === activeElementFilter) activeFilterName = elem['value'];\n  });\n\n  if (!activeElement.classList.contains('active')) {\n    document\n      .querySelectorAll('div[data-filter]')\n      .forEach(elem => elem.classList.remove('active', 'up', 'down'));\n    activeElement.classList.add('active');\n  }\n\n  const formatNumberValue = number => {\n    let numberValue = number.replace(/^\\D+/g, '');\n    numberValue = numberValue.replace(/,/g, '');\n\n    return numberValue;\n  };\n\n  for (let data in coinsDataUpd) {\n    if (activeFilterName === 'coinName') {\n      filteredArr = coinsDataUpd.sort((a, b) =>\n        a[activeFiat][activeFilterName].localeCompare(b[activeFiat][activeFilterName]),\n      );\n    } else {\n      filteredArr = coinsDataUpd.sort(\n        (a, b) => a[activeFiat][activeFilterName] - b[activeFiat][activeFilterName],\n      );\n    }\n  }\n\n  let classes = [];\n  if (activeElement.classList.contains('up')) {\n    activeElement.classList.remove('up');\n    activeElement.classList.add('down');\n    classes = [];\n    classes.push('active', 'down');\n    filteredArr.reverse();\n  } else {\n    activeElement.classList.remove('down');\n    activeElement.classList.add('up');\n    classes = [];\n    classes.push('active', 'up');\n  }\n\n  window.dataStorage.activeFilter = {\n    attr: activeElement.getAttribute('data-filter'),\n    classes: classes,\n  };\n\n  window.dataStorage.filteredArr = filteredArr;\n\n  window.renderApp();\n};\n\nconst renderCoinsTable = () => {\n  let view = `<div class=\"${styles.coinsTable}\"> ${generateCoinsTableHeader()} <div class=\"${\n    styles.tbody\n  }\">`;\n  const {\n    coinsDataDisplay,\n    coinsDataUpd,\n    availableFiats,\n    filteredArr,\n    activeFiat,\n  } = window.dataStorage;\n\n  let actualData = coinsDataUpd;\n  if (filteredArr) actualData = filteredArr;\n\n  for (let coin in actualData) {\n    view += `<div class=\"${styles.tr}\" id=\"${actualData[coin][activeFiat]['coinName']}\">\n        ${generateCoinsTable(actualData[coin])}\n      </div>`;\n  }\n\n  view += '</div></div>';\n  return view;\n};\n\nconst generateCoinsTableHeader = () => {\n  const headers = [\n    {\n      title: 'Asset',\n      filter: 'asset',\n    },\n    {\n      title: 'Price',\n      filter: 'price',\n    },\n    {\n      title: 'Returns (24h)',\n      filter: 'returns',\n    },\n    {\n      title: 'Market Cap',\n      filter: 'cap',\n    },\n    {\n      title: 'Total Exchange Volume',\n      filter: 'volume',\n    },\n  ];\n\n  let view = `<div class=\"${styles.thead} thead\">\n                <div class=\"${styles.tr}\">`;\n\n  headers.map(elem => {\n    view += `<div class=\"\n            ${styles.th}\n            ${\n              elem.filter === window.dataStorage.activeFilter['attr']\n                ? window.dataStorage.activeFilter['classes'][0]\n                : ''\n            }\n            ${\n              elem.filter === window.dataStorage.activeFilter['attr']\n                ? window.dataStorage.activeFilter['classes'][1]\n                : ''\n            }\" onclick=\"(${window.filter})(this)\" data-filter=\"${elem.filter}\">\n            <i class=\"${styles.sortingIcon}\"></i>\n            <span>${elem.title}</span>\n        </div>`;\n  });\n\n  view += `</div></div>`;\n  return view;\n\n  // return `\n  // <div class=\"${styles.thead} thead\">\n  // <div class=\"${styles.tr}\">\n  //   <div class=\"${styles.th}\" onclick=\"(${window.filter})(this)\" data-filter=\"asset\">\n  //     <span>Asset</span>\n  //   </div>\n  //   <div class=\"${styles.th}\" onclick=\"(${window.filter})(this)\" data-filter=\"price\">\n  //     <i class=\"${styles.sortingIcon}\"></i>\n  //     <span>Price</span>\n  //   </div>\n  //   <div class=\"${styles.th}\" onclick=\"(${window.filter})(this)\" data-filter=\"returns\">\n  //     <i class=\"${styles.sortingIcon}\"></i>\n  //     <span>Returns (24h)</span>\n  //   </div>\n  //   <div class=\"${styles.th}\" onclick=\"(${window.filter})(this)\" data-filter=\"cap\">\n  //     <i class=\"${styles.sortingIcon}\"></i>\n  //     <span>Market Cap</span>\n  //   </div>\n  //   <div class=\"${styles.th}\" onclick=\"(${window.filter})(this)\" data-filter=\"volume\">\n  //     <i class=\"${styles.sortingIcon}\"></i>\n  //     <span>Total Exchange Volume</span>\n  //   </div>\n  //   </div>\n  // </div>\n  //   `;\n};\n\nconst generateCoinsTable = coinData => {\n  let coinsTableBlock = '';\n  const { activeFiat } = window.dataStorage;\n  const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP, coinName } = coinData[activeFiat];\n\n  let changePctDay_HTML;\n  if (CHANGEPCTDAY >= 0) {\n    changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n  } else {\n    changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n  }\n\n  coinsTableBlock += `\n                      <div class=\"${styles.td}\">\n                          <b>${coinName}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${PRICE}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${changePctDay_HTML}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${MKTCAP}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${VOLUMEDAYTO}</b>\n                      </div>\n                      `;\n\n  return coinsTableBlock;\n};\n\nconst selectFiat = () => {\n  let view = `<select class=\"${styles.coinToFiatSelect}\" onchange=\"(${window.updateFiatCurrency})(this)\">`;\n  const { activeFiat, availableFiats } = window.dataStorage;\n\n  availableFiats.map(fiat => {\n    if (fiat === activeFiat) {\n      view += `<option value='${fiat}' selected>${fiat}</option>`;\n    } else {\n      view += `<option value='${fiat}'>${fiat}</option>`;\n    }\n  });\n\n  view += '</select>';\n  return view;\n};\n\nconst App = () => {\n  return `<div class=\"${styles.coins}\">\n    ${selectFiat()}\n    ${renderCoinsTable()}\n  </div>`;\n};\n\nconst renderApp = () => {\n  document.getElementById('app-root').innerHTML = `\n          ${App()}\n      `;\n};\n\nstartApp();\n\n// const renderCoins = () => {\n//   let view = '';\n//   const { coinsDataDisplay, availableFiats } = window.dataStorage;\n\n//   for (let coin in coinsDataDisplay) {\n//     view += `<div class=\"${styles.coinContainer}\" id=\"${coin}\">\n//         ${generateCoinTitle(coin)}\n//         <div class=\"${styles.coinInfo}\">\n//           ${generateCoinInfo(coinsDataDisplay[coin])}\n//         </div>\n//       </div>`;\n//   }\n\n//   return view;\n// };\n\n// const generateCoinTitle = coin => {\n//   let coinName;\n//   if (coin === 'BTC') {\n//     coinName = 'Bitcoin';\n//   } else {\n//     coinName = 'Ethereum';\n//   }\n\n//   return `\n//   <div class=\"${styles.coinHeader}\">\n//     <h2 class=\"${styles.coinName}\">${coinName}<span>${coin}</span></h2>\n//   </div>\n//     `;\n// };\n\n// const generateCoinInfo = coinData => {\n//   let coinInfoBlock = '';\n//   const { activeFiat } = window.dataStorage;\n//   const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP } = coinData[activeFiat];\n\n//   let changePctDay_HTML;\n//   if (CHANGEPCTDAY >= 0) {\n//     changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n//   } else {\n//     changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n//   }\n\n//   coinInfoBlock += `<div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">Price</div>\n//                           <b class=\"${styles.price}\">${PRICE}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">24 HOUR % CHANGE</div>\n//                           <b>${changePctDay_HTML}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">MARKET CAP</div>\n//                           <b>${MKTCAP}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">VOLUME (24H)</div>\n//                           <b>${VOLUMEDAYTO}</b>\n//                       </div>\n//                       `;\n\n//   return coinInfoBlock;\n// };\n"]}