{"version":3,"sources":["components/SelectFiat.js","components/CoinsTable.js","components/App.js","data/dataStore.js","data/coinsAPI.js","data/coinsData.js","components/filters.js","index.js"],"names":["selectFiat","view","styles","coinToFiatSelect","activeFiat","availableFiats","window","dataStorage","map","fiat","updateFiatCurrency","event","selectedFiat","options","selectedIndex","value","renderApp","CoinsTable","renderCoinsTable","generateCoinsTableHeader","thead","tr","title","filter","elem","th","activeFilter","sortingIcon","generateCoinsTable","coinData","coinsTableBlock","PRICE","CHANGEPCTDAY","VOLUMEDAYTO","MKTCAP","coinName","changePctDay_HTML","green","red","td","isDataLoading","loading","coins","coinsTable","tbody","coinsDataDisplay","coinsDataUpd","filteredArr","actualData","coin","App","dataStore","availableCoins","error","attr","classes","getCoinsUrl","rearengeData","coinsDataRaw","push","loadData","url","fetch","then","response","json","data","catch","Promise","resolve","getAvailablePairs","findFirst","startApp","a","Filters","activeFilterName","activeElement","activeElementFilter","getAttribute","filterName","classList","contains","document","querySelectorAll","forEach","remove","add","sort","b","localeCompare","reverse","module","hot","accept","getElementById","innerHTML"],"mappings":"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","file":"src.a315c1db.js","sourceRoot":"../src","sourcesContent":["import styles from '../styles.css';\n\nwindow.updateFiatCurrency = event => {\n  let selectedFiat = event.options[event.selectedIndex].value;\n  window.dataStorage['activeFiat'] = selectedFiat;\n  window.renderApp();\n};\n\nexport default function selectFiat() {\n  let view = `<select class=\"${styles.coinToFiatSelect}\" onchange=\"window.updateFiatCurrency(this)\">`;\n  const { activeFiat, availableFiats } = window.dataStorage;\n\n  availableFiats.map(fiat => {\n    if (fiat === activeFiat) {\n      view += `<option value='${fiat}' selected>${fiat}</option>`;\n    } else {\n      view += `<option value='${fiat}'>${fiat}</option>`;\n    }\n  });\n\n  view += '</select>';\n  return view;\n}\n","import styles from '../styles.css';\n\nimport SelectFiat from './SelectFiat';\n\nexport default function CoinsTable() {\n  const renderCoinsTable = () => {\n    if (window.dataStorage.isDataLoading) {\n      return `<div class=\"${styles.loading}\">Data is loading</div>`;\n    }\n    let view = `<div class=\"${styles.coins}\"> ${SelectFiat()} <div class=\"${\n      styles.coinsTable\n    }\"> ${generateCoinsTableHeader()} <div class=\"${styles.tbody}\">\n      </div>`;\n    const {\n      coinsDataDisplay,\n      coinsDataUpd,\n      availableFiats,\n      filteredArr,\n      activeFiat,\n    } = window.dataStorage;\n\n    let actualData = coinsDataUpd;\n    if (filteredArr) actualData = filteredArr;\n\n    for (let coin in actualData) {\n      view += `<div class=\"${styles.tr}\" id=\"${actualData[coin][activeFiat]['coinName']}\">\n                    ${generateCoinsTable(actualData[coin])}\n                  </div>`;\n    }\n\n    view += '</div></div>';\n    return view;\n  };\n\n  const generateCoinsTableHeader = () => {\n    const headers = [\n      {\n        title: 'Asset',\n        filter: 'asset',\n      },\n      {\n        title: 'Price',\n        filter: 'price',\n      },\n      {\n        title: 'Returns (24h)',\n        filter: 'returns',\n      },\n      {\n        title: 'Market Cap',\n        filter: 'cap',\n      },\n      {\n        title: 'Total Exchange Volume',\n        filter: 'volume',\n      },\n    ];\n\n    let view = `<div class=\"${styles.thead} thead\">\n                    <div class=\"${styles.tr}\">`;\n\n    headers.map(elem => {\n      view += `<div class=\"\n                ${styles.th}\n                ${\n                  elem.filter === window.dataStorage.activeFilter['attr']\n                    ? window.dataStorage.activeFilter['classes'][0]\n                    : ''\n                }\n                ${\n                  elem.filter === window.dataStorage.activeFilter['attr']\n                    ? window.dataStorage.activeFilter['classes'][1]\n                    : ''\n                }\" onclick=\"window.Filters(this)\" data-filter=\"${elem.filter}\">\n                <i class=\"${styles.sortingIcon}\"></i>\n                <span>${elem.title}</span>\n            </div>`;\n    });\n\n    view += `</div></div>`;\n    return view;\n  };\n\n  const generateCoinsTable = coinData => {\n    let coinsTableBlock = '';\n    const { activeFiat } = window.dataStorage;\n    const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP, coinName } = coinData[activeFiat];\n\n    let changePctDay_HTML;\n    if (CHANGEPCTDAY >= 0) {\n      changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n    } else {\n      changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n    }\n\n    coinsTableBlock += `\n                          <div class=\"${styles.td}\">\n                              <b>${coinName}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${PRICE}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${changePctDay_HTML}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${MKTCAP}</b>\n                          </div>\n                          <div class=\"${styles.td}\">\n                              <b>${VOLUMEDAYTO}</b>\n                          </div>\n                          `;\n\n    return coinsTableBlock;\n  };\n\n  return renderCoinsTable();\n}\n","import CoinsTable from './CoinsTable';\n\nexport default function App() {\n  return `<div>\n        ${CoinsTable()}\n    </div>`;\n}\n","const dataStore = {\n  availableFiats: [],\n  availableCoins: [],\n  activeFiat: 'USD',\n  isDataLoading: false,\n  error: null,\n  activeFilter: {\n    attr: '',\n    classes: [],\n  },\n};\n\nexport default dataStore;\n","export default function getCoinsUrl() {\n  return `https://min-api.cryptocompare.com/data/pricemultifull?fsyms=BTC,ETH,XRP,ADA&tsyms=USD,EUR&api_key={${process.env.CRYPTO_API_KEY}}`;\n}\n","import getCoinsUrl from './coinsAPI';\n\nconst rearengeData = coinsDataDisplay => {\n  let coinsDataUpd = [];\n  for (let coin in coinsDataDisplay) {\n    for (let fiat in coinsDataDisplay[coin]) {\n      coinsDataDisplay[coin][fiat]['coinName'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['FROMSYMBOL'];\n      coinsDataDisplay[coin][fiat]['coinPrice'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['PRICE'];\n      coinsDataDisplay[coin][fiat]['coinChange'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['CHANGEPCTDAY'];\n      coinsDataDisplay[coin][fiat]['coinCap'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['MKTCAP'];\n      coinsDataDisplay[coin][fiat]['coinVolume'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['VOLUMEDAYTO'];\n    }\n    coinsDataUpd.push(coinsDataDisplay[coin]);\n  }\n\n  window.dataStorage.coinsDataUpd = coinsDataUpd;\n};\n\nconst loadData = url => {\n  window.dataStorage.isDataLoading = true;\n  window.renderApp();\n  window.dataStorage.error = null;\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      window.dataStorage.isDataLoading = false;\n      window.dataStorage.coinsDataDisplay = data['DISPLAY'];\n      window.dataStorage.coinsDataRaw = data['RAW'];\n      rearengeData(window.dataStorage.coinsDataDisplay);\n    })\n    .catch(error => {\n      window.dataStore.error = error;\n      return Promise.resolve({});\n    });\n};\n\nconst getAvailablePairs = () => {\n  const { coinsDataDisplay, availableFiats, availableCoins } = window.dataStorage;\n  let findFirst = 0;\n  for (let coin in coinsDataDisplay) {\n    availableCoins.push(coin);\n    for (let fiat in coinsDataDisplay[coin]) {\n      if (!findFirst) {\n        availableFiats.push(fiat);\n      }\n    }\n    findFirst = 1;\n  }\n};\n\nexport default function startApp() {\n  const a = getCoinsUrl();\n  loadData(a).then(() => {\n    getAvailablePairs();\n    window.renderApp();\n  });\n}\n","export default function Filters(event) {\n  const filters = [\n    {\n      filterName: 'asset',\n      value: 'coinName',\n    },\n    {\n      filterName: 'price',\n      value: 'coinPrice',\n    },\n    {\n      filterName: 'returns',\n      value: 'coinChange',\n    },\n    {\n      filterName: 'cap',\n      value: 'coinCap',\n    },\n    {\n      filterName: 'volume',\n      value: 'coinVolume',\n    },\n  ];\n\n  let filteredArr = [];\n  let activeFilterName;\n  const { coinsDataDisplay, coinsDataUpd, activeFiat } = window.dataStorage;\n\n  const activeElement = event;\n  const activeElementFilter = activeElement.getAttribute('data-filter');\n  filters.map(elem => {\n    if (elem['filterName'] === activeElementFilter) activeFilterName = elem['value'];\n  });\n\n  if (!activeElement.classList.contains('active')) {\n    document\n      .querySelectorAll('div[data-filter]')\n      .forEach(elem => elem.classList.remove('active', 'up', 'down'));\n    activeElement.classList.add('active');\n  }\n\n  const formatNumberValue = number => {\n    let numberValue = number.replace(/^\\D+/g, '');\n    numberValue = numberValue.replace(/,/g, '');\n\n    return numberValue;\n  };\n\n  for (let data in coinsDataUpd) {\n    if (activeFilterName === 'coinName') {\n      filteredArr = coinsDataUpd.sort((a, b) =>\n        a[activeFiat][activeFilterName].localeCompare(b[activeFiat][activeFilterName]),\n      );\n    } else {\n      filteredArr = coinsDataUpd.sort(\n        (a, b) => a[activeFiat][activeFilterName] - b[activeFiat][activeFilterName],\n      );\n    }\n  }\n\n  let classes = [];\n  if (activeElement.classList.contains('up')) {\n    activeElement.classList.remove('up');\n    activeElement.classList.add('down');\n    classes = [];\n    classes.push('active', 'down');\n    filteredArr.reverse();\n  } else {\n    activeElement.classList.remove('down');\n    activeElement.classList.add('up');\n    classes = [];\n    classes.push('active', 'up');\n  }\n\n  window.dataStorage.activeFilter = {\n    attr: activeElement.getAttribute('data-filter'),\n    classes: classes,\n  };\n\n  window.dataStorage.filteredArr = filteredArr;\n\n  window.renderApp();\n}\n","// Start from here\n\nimport App from './components/App';\nimport dataStore from './data/dataStore';\nimport startApp from './data/coinsData';\nimport Filters from './components/filters';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStorage = dataStore;\nwindow.Filters = Filters;\n\nwindow.renderApp = () => {\n  document.getElementById('app-root').innerHTML = `\n          ${App()}\n      `;\n};\n\nstartApp();\n"]}