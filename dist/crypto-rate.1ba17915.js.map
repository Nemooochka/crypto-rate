{"version":3,"sources":["index.js"],"names":["module","hot","accept","window","dataStorage","availableFiats","availableCoins","activeFiat","isDataLoading","error","activeFilter","attr","classes","loadData","url","renderApp","fetch","then","response","json","data","coinsDataDisplay","coinsDataRaw","rearengeData","catch","dataStore","Promise","resolve","getAvailablePairs","findFirst","coin","push","fiat","coinsDataUpd","startApp","updateFiatCurrency","event","selectedFiat","options","selectedIndex","value","filter","filteredArr","activeFilterName","activeElement","activeElementFilter","getAttribute","filterName","map","elem","classList","contains","document","querySelectorAll","forEach","remove","add","sort","a","b","localeCompare","reverse","renderCoinsTable","view","selectFiat","styles","coinsTable","generateCoinsTableHeader","tbody","actualData","tr","generateCoinsTable","thead","title","th","sortingIcon","coinData","coinsTableBlock","PRICE","CHANGEPCTDAY","VOLUMEDAYTO","MKTCAP","coinName","changePctDay_HTML","green","red","td","coinToFiatSelect","App","coins","getElementById","innerHTML"],"mappings":"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","file":"crypto-rate.1ba17915.js","sourceRoot":"..","sourcesContent":["// Start from here\n\nimport styles from './styles.css';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStorage = {\n  availableFiats: [],\n  availableCoins: [],\n  activeFiat: 'USD',\n  isDataLoading: false,\n  error: null,\n  activeFilter: {\n    attr: '',\n    classes: [],\n  },\n};\n\nwindow.loadData = url => {\n  window.dataStorage.isDataLoading = true;\n  window.renderApp();\n  window.dataStorage.error = null;\n  return fetch(url + `&api_key={${process.env.CRYPTO_API_KEY}}`)\n    .then(response => response.json())\n    .then(data => {\n      window.dataStorage.isDataLoading = false;\n      window.dataStorage.coinsDataDisplay = data['DISPLAY'];\n      window.dataStorage.coinsDataRaw = data['RAW'];\n      window.rearengeData(window.dataStorage.coinsDataDisplay);\n    })\n    .catch(error => {\n      window.dataStore.error = error;\n      return Promise.resolve({});\n    });\n};\n\nwindow.getAvailablePairs = () => {\n  const { coinsDataDisplay, availableFiats, availableCoins } = window.dataStorage;\n  let findFirst = 0;\n  for (let coin in coinsDataDisplay) {\n    availableCoins.push(coin);\n    for (let fiat in coinsDataDisplay[coin]) {\n      if (!findFirst) {\n        availableFiats.push(fiat);\n      }\n    }\n    findFirst = 1;\n  }\n};\n\nwindow.rearengeData = coinsDataDisplay => {\n  let coinsDataUpd = [];\n  for (let coin in coinsDataDisplay) {\n    for (let fiat in coinsDataDisplay[coin]) {\n      coinsDataDisplay[coin][fiat]['coinName'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['FROMSYMBOL'];\n      coinsDataDisplay[coin][fiat]['coinPrice'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['PRICE'];\n      coinsDataDisplay[coin][fiat]['coinChange'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['CHANGEPCTDAY'];\n      coinsDataDisplay[coin][fiat]['coinCap'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['MKTCAP'];\n      coinsDataDisplay[coin][fiat]['coinVolume'] =\n        window.dataStorage.coinsDataRaw[coin][fiat]['VOLUMEDAYTO'];\n    }\n    coinsDataUpd.push(coinsDataDisplay[coin]);\n  }\n\n  window.dataStorage.coinsDataUpd = coinsDataUpd;\n};\n\nconst startApp = () => {\n  window\n    .loadData(\n      'https://min-api.cryptocompare.com/data/pricemultifull?fsyms=BTC,ETH,XRP,ADA&tsyms=USD,EUR',\n    )\n    .then(() => {\n      window.getAvailablePairs();\n      window.renderApp();\n    });\n\n  window.updateFiatCurrency = event => {\n    let selectedFiat = event.options[event.selectedIndex].value;\n    window.dataStorage['activeFiat'] = selectedFiat;\n    window.renderApp();\n  };\n};\n\nwindow.filter = event => {\n  const filters = [\n    {\n      filterName: 'asset',\n      value: 'coinName',\n    },\n    {\n      filterName: 'price',\n      value: 'coinPrice',\n    },\n    {\n      filterName: 'returns',\n      value: 'coinChange',\n    },\n    {\n      filterName: 'cap',\n      value: 'coinCap',\n    },\n    {\n      filterName: 'volume',\n      value: 'coinVolume',\n    },\n  ];\n\n  let filteredArr = [];\n  let activeFilterName;\n  const { coinsDataDisplay, coinsDataUpd, activeFiat } = window.dataStorage;\n\n  const activeElement = event;\n  const activeElementFilter = activeElement.getAttribute('data-filter');\n  filters.map(elem => {\n    if (elem['filterName'] === activeElementFilter) activeFilterName = elem['value'];\n  });\n\n  if (!activeElement.classList.contains('active')) {\n    document\n      .querySelectorAll('div[data-filter]')\n      .forEach(elem => elem.classList.remove('active', 'up', 'down'));\n    activeElement.classList.add('active');\n  }\n\n  const formatNumberValue = number => {\n    let numberValue = number.replace(/^\\D+/g, '');\n    numberValue = numberValue.replace(/,/g, '');\n\n    return numberValue;\n  };\n\n  for (let data in coinsDataUpd) {\n    if (activeFilterName === 'coinName') {\n      filteredArr = coinsDataUpd.sort((a, b) =>\n        a[activeFiat][activeFilterName].localeCompare(b[activeFiat][activeFilterName]),\n      );\n    } else {\n      filteredArr = coinsDataUpd.sort(\n        (a, b) => a[activeFiat][activeFilterName] - b[activeFiat][activeFilterName],\n      );\n    }\n  }\n\n  let classes = [];\n  if (activeElement.classList.contains('up')) {\n    activeElement.classList.remove('up');\n    activeElement.classList.add('down');\n    classes = [];\n    classes.push('active', 'down');\n    filteredArr.reverse();\n  } else {\n    activeElement.classList.remove('down');\n    activeElement.classList.add('up');\n    classes = [];\n    classes.push('active', 'up');\n  }\n\n  window.dataStorage.activeFilter = {\n    attr: activeElement.getAttribute('data-filter'),\n    classes: classes,\n  };\n\n  window.dataStorage.filteredArr = filteredArr;\n\n  window.renderApp();\n};\n\nconst renderCoinsTable = () => {\n  if (window.dataStorage.isDataLoading) {\n    return `<div>Data is loading</div>`;\n  }\n  let view = `${window.selectFiat()} <div class=\"${\n    styles.coinsTable\n  }\"> ${generateCoinsTableHeader()} <div class=\"${styles.tbody}\">`;\n  const {\n    coinsDataDisplay,\n    coinsDataUpd,\n    availableFiats,\n    filteredArr,\n    activeFiat,\n  } = window.dataStorage;\n\n  let actualData = coinsDataUpd;\n  if (filteredArr) actualData = filteredArr;\n\n  for (let coin in actualData) {\n    view += `<div class=\"${styles.tr}\" id=\"${actualData[coin][activeFiat]['coinName']}\">\n                ${generateCoinsTable(actualData[coin])}\n              </div>`;\n  }\n\n  view += '</div></div>';\n  return view;\n};\n\nconst generateCoinsTableHeader = () => {\n  const headers = [\n    {\n      title: 'Asset',\n      filter: 'asset',\n    },\n    {\n      title: 'Price',\n      filter: 'price',\n    },\n    {\n      title: 'Returns (24h)',\n      filter: 'returns',\n    },\n    {\n      title: 'Market Cap',\n      filter: 'cap',\n    },\n    {\n      title: 'Total Exchange Volume',\n      filter: 'volume',\n    },\n  ];\n\n  let view = `<div class=\"${styles.thead} thead\">\n                <div class=\"${styles.tr}\">`;\n\n  headers.map(elem => {\n    view += `<div class=\"\n            ${styles.th}\n            ${\n              elem.filter === window.dataStorage.activeFilter['attr']\n                ? window.dataStorage.activeFilter['classes'][0]\n                : ''\n            }\n            ${\n              elem.filter === window.dataStorage.activeFilter['attr']\n                ? window.dataStorage.activeFilter['classes'][1]\n                : ''\n            }\" onclick=\"window.filter(this)\" data-filter=\"${elem.filter}\">\n            <i class=\"${styles.sortingIcon}\"></i>\n            <span>${elem.title}</span>\n        </div>`;\n  });\n\n  view += `</div></div>`;\n  return view;\n};\n\nconst generateCoinsTable = coinData => {\n  let coinsTableBlock = '';\n  const { activeFiat } = window.dataStorage;\n  const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP, coinName } = coinData[activeFiat];\n\n  let changePctDay_HTML;\n  if (CHANGEPCTDAY >= 0) {\n    changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n  } else {\n    changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n  }\n\n  coinsTableBlock += `\n                      <div class=\"${styles.td}\">\n                          <b>${coinName}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${PRICE}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${changePctDay_HTML}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${MKTCAP}</b>\n                      </div>\n                      <div class=\"${styles.td}\">\n                          <b>${VOLUMEDAYTO}</b>\n                      </div>\n                      `;\n\n  return coinsTableBlock;\n};\n\nwindow.selectFiat = () => {\n  let view = `<select class=\"${styles.coinToFiatSelect}\" onchange=\"window.updateFiatCurrency(this)\">`;\n  const { activeFiat, availableFiats } = window.dataStorage;\n\n  availableFiats.map(fiat => {\n    if (fiat === activeFiat) {\n      view += `<option value='${fiat}' selected>${fiat}</option>`;\n    } else {\n      view += `<option value='${fiat}'>${fiat}</option>`;\n    }\n  });\n\n  view += '</select>';\n  return view;\n};\n\nconst App = () => {\n  return `<div class=\"${styles.coins}\">\n      ${renderCoinsTable()}\n  </div>`;\n};\n\nwindow.renderApp = () => {\n  document.getElementById('app-root').innerHTML = `\n          ${App()}\n      `;\n};\n\nstartApp();\n\n// const renderCoins = () => {\n//   let view = '';\n//   const { coinsDataDisplay, availableFiats } = window.dataStorage;\n\n//   for (let coin in coinsDataDisplay) {\n//     view += `<div class=\"${styles.coinContainer}\" id=\"${coin}\">\n//         ${generateCoinTitle(coin)}\n//         <div class=\"${styles.coinInfo}\">\n//           ${generateCoinInfo(coinsDataDisplay[coin])}\n//         </div>\n//       </div>`;\n//   }\n\n//   return view;\n// };\n\n// const generateCoinTitle = coin => {\n//   let coinName;\n//   if (coin === 'BTC') {\n//     coinName = 'Bitcoin';\n//   } else {\n//     coinName = 'Ethereum';\n//   }\n\n//   return `\n//   <div class=\"${styles.coinHeader}\">\n//     <h2 class=\"${styles.coinName}\">${coinName}<span>${coin}</span></h2>\n//   </div>\n//     `;\n// };\n\n// const generateCoinInfo = coinData => {\n//   let coinInfoBlock = '';\n//   const { activeFiat } = window.dataStorage;\n//   const { PRICE, CHANGEPCTDAY, VOLUMEDAYTO, MKTCAP } = coinData[activeFiat];\n\n//   let changePctDay_HTML;\n//   if (CHANGEPCTDAY >= 0) {\n//     changePctDay_HTML = `<span class=\"${styles.green}\">+${CHANGEPCTDAY}%</span>`;\n//   } else {\n//     changePctDay_HTML = `<span class=\"${styles.red}\">-${CHANGEPCTDAY}%</span>`;\n//   }\n\n//   coinInfoBlock += `<div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">Price</div>\n//                           <b class=\"${styles.price}\">${PRICE}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">24 HOUR % CHANGE</div>\n//                           <b>${changePctDay_HTML}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">MARKET CAP</div>\n//                           <b>${MKTCAP}</b>\n//                       </div>\n//                       <div class=\"${styles.coinInfoBlock}\">\n//                           <div class=\"${styles.title}\">VOLUME (24H)</div>\n//                           <b>${VOLUMEDAYTO}</b>\n//                       </div>\n//                       `;\n\n//   return coinInfoBlock;\n// };\n"]}